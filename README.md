Описание проекта
Проект представляет собой мессенджер с типичными для него возможностями:

 Создавать аккаунт
 Настраивать профиль
 Добавлять пользователей в друзья, удалять их из друзей
 Отправлять и просматривать сообщения
 Редактировать и удалять сообщения
 Отправлять стикеры
 Прикреплять приложения к сообщению
Проект состоит из API и веб-интерфейса для взаимодействия с этим API.

Проект выполнен с использованием языка Python (и не только).

Информация о работе (ТЗ)
Детали реализации
Как сказано выше, проект представляет собой мессенджер. Все данные о пользователях хранятся в БД по пути user_data/db/messenger.sqlite3. Вместе с проектом поставляется БД, заполненная тестовыми данными.
Хочется отметить, что все пользователи в БД имеют 2 id: id и alternative_id. id постоянный и используется в качестве внешнего ключа в других таблицах.
alternative_id используется для идентификации пользователя в API и веб-интерфейсе. При изменении email или пароля alternative_id меняется случайным образом, что гарантирует, что старые сеансы аутентификации перестанут быть действительными.
Аутентификация в приложении происходит с помощью JWT. В данном приложении используются access токены с ограниченным временем действия, а также refresh токены, время действия которых не ограничено. Для аутентификации в приложении эти токены необходимо отправлять вместе с запросом либо в cookie, либо в строке запроса, либо в json.
При входе в аккаунт сервер возвращает cookie, содержащий поля access_token_cookie и refresh_token_cookie с соответствующими токенами. По истечению срока действия access токена пользователь перенаправляется на страницу /refresh, где его токен автоматически обновляется. На главной странице это происходит через AJAX запросы.

Веб-интерфейс
Веб-интерфейс включает в себя следующие страницы:

/login - страница входа в аккаунт
/index, / - главная страница, а также страница с чатами; доступ к этой странице могут получить только авторизованные пользователи
/friends - страница с друзьями пользователя, а также с поиском пользователей. Поиск происходит по имени, фамилии или ID; только для авторизированных пользователей
/profile - страница с профилем пользователя. На этой странице есть два раздела: "Основное" и "Безопасность". Для того чтобы отредактировать профиль, необходимо нажать кнопку "Изменить" внизу страницы. Под ID подразумевается alternative_id. Доступ только для авторизированных пользователей
/docs/v1/api_docs - документация к API в веб-формате. Содержимое страницы генерируется автоматически из файла app/docs/api_docs.md
/logout - выход из аккаунта. При переходе по этой ссылке пользователь разлогинивается и попадает на страницу со входом
/refresh - при переходе на эту страницу access токен пользователя обновляется, (новый токен помещается в cookie) и пользователь переходит на главную страницу (либо на страницу, указанную в параметре next в строке запроса); только для пользователей, имеющий refresh токен.
Работа веб-интерфейса проверена в следующих браузерах: Chrome, Yandex Browser, Opera. В других браузерах могут наблюдаться различные проблемы, так что прошу пользоваться браузерами из списка выше.

API
Документация к API находится здесь

Установка и запуск
Чтобы запустить приложение:

Установите Python версии 3.8 и выше;

Зайдите в командную строку (bash, cmd, PowerShell). Если ваш ПК работает под управлением ОС Windows, то для запуска командной строки вам необходимо нажать сочетание клавиш Win+R и в появившемся окошке ввести "cmd".

Введите в открывшейся командной строке команду для перехода в директорию приложения (в директорию, в которой находится этот файл README.md). В cmd для этого необходимо набрать команду cd /D "путь/к/приложению", где "путь/к/приложению" - это полный путь к директории приложения.

В командной строке введите последовательно команды python -m venv venv и venv\Scripts\activate (для cmd) или venv/bin/activate (для bash). Выполнив эти команды, вы создадите виртуальное окружение (чтобы выйти из виртуального окружения после того, как закончите работать с приложением, выполните команду venv\Scripts\deactivate в cmd или venv/bin/deactivate в bash)

Установите все зависимости, выполните в консоли команду pip install -r requirements.txt. Вы можете пропустить прошлый пункт и не создавать виртуальное окружение, хоть это и не рекомендуется.

Для запуска приложения выполните команду python __main__.py.

Для запуска программы в будущем опять зайдите в консоль, перейдите в директорию приложения, запустите виртуальную среду (если вы её создавали) и выполните команду python __main__.py.

Готово! Теперь приложение запущено по адресу https://localhost:PORT, где PORT - это одноимённая переменная среды (по умолчанию её значение равно 5000). Приложение запущено в вашей локальной сети. Если вы хотите, чтобы к приложению можно было получить доступ через Интернет, вы можете воспользоваться, к примеру, сервисом ngrok.

Сборка
Проект готов к запуску "из коробки", но если вам вдруг необходимо изменить какие либо стиле на странице, придёться пересобирать проект вручную (так как они заданы в файле SASS по пути app/sass/style.scss). Для этого:

Установите SASS (руководство по установке);
Скачайте и распакуйте в папку app содержимое исходников Bootstrap (скачать исходники). Распакованную папку переименуйте в "bootstrap";
Находясь в директории приложения выполните в терминале команду sass app/sass:app/static/css для компиляции SASS файлов.
Готово! Стили скомпилированы.

Конфигурация приложения
Конфигурация приложения происходит в зависимости от значения переменной среды APP_CONFIG. Если значением является путь к файлу, то конфигурация происходит через этот файл (подробнее в документации Flask).

Иначе значение переменной расценивается как название Python класс и конфигурация происходит через данный класс (подробнее в документации Flask).

Все конфиги рекомендовано хранить в файле app/config.py.

По умолчанию APP_CONFIG = app.config.DevelopmentConfig.

Чтобы сконфигурировать приложение через переменные среды, установите значение APP_CONFIG = app.config.EnvConfig, в переменную среды APP_ENV_VARS внесите через запятую названия всех значений конфигурации, которые вы хотите установить через переменные среды, и соотвествующим переменным среды присвойте нужные значения (учитите, что эти значения вычисляются как Python выражения с помощью функции eval()). Например выполнив данные команды в командной строке Windows:

set APP_CONFIG=app.config.EnvConfig
set APP_ENV_VARS=SECRET_KEY, DEBUG
set SECRET_KEY='SUPER_SECRET_KEY'
set DEBUG=True
Мы установим значениям конфигурации приложения SECRET_KEY и DEBUG значения 'SUPER_SECRET_KEY' и True соответственно.
